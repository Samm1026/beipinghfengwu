:root {
    /* --- 调色板：北平传统色 --- */
    --color-primary: #8E354A; /* 故宫红 */
    --color-secondary: #4A5E6A; /* 琉璃蓝/灰 */
    --color-text-main: #2C2C2C; /* 墨黑 */
    --color-text-light: #666666; /* 淡墨 */
    --color-bg: #F7F5F0; /* 宣纸白 */
    --color-bg-alt: #EBE8E1; /* 沉旧纸色 */
    
    /* --- 字体 --- */
    --font-title: 'Ma Shan Zheng', cursive;
    --font-body: 'Noto Serif SC', serif;
    
    --container-width: 1200px;
    --transition-slow: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
    --transition-fast: all 0.3s ease;
}

* { box-sizing: border-box; margin: 0; padding: 0; }

body {
    font-family: var(--font-body);
    background-color: var(--color-bg);
    color: var(--color-text-main);
    line-height: 1.8;
    overflow-x: hidden;
}

h1, h2, h3, h4 { font-family: var(--font-title); font-weight: 400; }
a { text-decoration: none; color: inherit; transition: var(--transition-fast); }
ul { list-style: none; }

/* 滚动条 */
.scroll-progress {
    position: fixed; top: 0; left: 0; width: 0%; height: 3px;
    background: var(--color-primary); z-index: 1001; transition: width 0.1s;
}

/* 导航栏 */
.navbar {
    position: fixed; top: 0; width: 100%; padding: 20px 0; z-index: 1000;
    background: rgba(247, 245, 240, 0.9); backdrop-filter: blur(10px);
    border-bottom: 1px solid rgba(0,0,0,0.05);
}
.navbar .container { display: flex; justify-content: space-between; align-items: center; max-width: var(--container-width); margin: 0 auto; padding: 0 24px; }
.logo { font-size: 2rem; color: var(--color-primary); letter-spacing: 2px; }
.nav-link { margin-left: 32px; font-size: 1rem; position: relative; opacity: 0.7; }
.nav-link.active, .nav-link:hover { opacity: 1; color: var(--color-primary); }

/* Hero */
.hero-section {
    height: 100vh; display: flex; align-items: center; justify-content: center;
    position: relative; background-size: cover; background-position: center; color: #fff;
    background-color: #333; /* 图片加载前的背景 */
}
.hero-overlay { position: absolute; inset: 0; background: rgba(0,0,0,0.4); z-index: 1; }
.hero-content { position: relative; z-index: 2; text-align: center; animation: fadeUp 1s forwards 0.5s; opacity: 0; transform: translateY(30px); }
.hero-title { font-size: 5rem; margin-bottom: 1rem; text-shadow: 0 4px 20px rgba(0,0,0,0.3); }
.btn-hero { padding: 12px 40px; border: 1px solid #fff; color: #fff; font-size: 1.1rem; border-radius: 50px; background: transparent; cursor: pointer; transition: var(--transition-slow); }
.btn-hero:hover { background: #fff; color: var(--color-text-main); }

/* 卡片 */
.route-card { display: grid; grid-template-columns: 1.2fr 0.8fr; margin-bottom: 100px; gap: 40px; align-items: center; }
.route-card:nth-child(even) { grid-template-columns: 0.8fr 1.2fr; direction: rtl; }
.route-card:nth-child(even) .route-content { direction: ltr; }
.route-image-wrapper { overflow: hidden; border-radius: 4px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); height: 500px; }
.route-image { width: 100%; height: 100%; background-size: cover; background-position: center; transition: transform 0.8s ease; }
.route-card:hover .route-image { transform: scale(1.05); }
.route-content { padding: 40px; background: #fff; box-shadow: -20px 20px 60px rgba(0,0,0,0.05); z-index: 2; margin-left: -50px; }
.route-card:nth-child(even) .route-content { margin-left: 0; margin-right: -50px; }
.route-tags span { display: inline-block; padding: 4px 12px; border: 1px solid var(--color-secondary); color: var(--color-secondary); font-size: 0.8rem; margin-right: 8px; margin-bottom: 12px; border-radius: 20px; }

/* 详情页通用 */
.article-container { max-width: 800px; margin: 0 auto; padding: 80px 24px; }
.chapter-title { font-size: 2rem; color: var(--color-primary); margin-top: 60px; margin-bottom: 24px; border-left: 4px solid var(--color-primary); padding-left: 16px; }
.drop-cap::first-letter { float: left; font-size: 4rem; line-height: 3.5rem; padding-right: 12px; color: var(--color-primary); font-family: var(--font-title); }

/* 任务卡 */
.task-card-container { margin: 40px 0; perspective: 1000px; }
.task-card-inner { background: var(--color-bg-alt); border: 1px dashed var(--color-secondary); padding: 40px; text-align: center; transition: var(--transition-slow); }
.task-card-inner:hover { background: #fff; box-shadow: 0 10px 30px rgba(0,0,0,0.05); transform: translateY(-5px); }
.btn-generate { margin-top: 20px; background: var(--color-text-main); color: #fff; border: none; padding: 10px 24px; cursor: pointer; }

/* 动画 */
.reveal { opacity: 0; transform: translateY(50px); transition: all 0.8s ease; }
.reveal.active { opacity: 1; transform: translateY(0); }
@keyframes fadeUp { to { opacity: 1; transform: translateY(0); } }

/* 移动端适配 */
@media (max-width: 768px) {
    .route-card, .route-card:nth-child(even) { grid-template-columns: 1fr; margin-bottom: 60px; gap: 0; }
    .route-content, .route-card:nth-child(even) .route-content { margin: -40px 20px 0 20px; }
    .hero-title { font-size: 3rem; }
}

/* --- AI 模态框样式 --- */
.ai-modal {
    position: fixed; inset: 0; z-index: 10000;
    background: rgba(0, 0, 0, 0.85);
    backdrop-filter: blur(8px);
    display: flex; justify-content: center; align-items: center;
    opacity: 0; visibility: hidden; transition: all 0.4s ease;
}
.ai-modal.active { opacity: 1; visibility: visible; }

.ai-container {
    background: var(--c-paper); width: 90%; max-width: 450px;
    padding: 40px; border-radius: 4px; position: relative;
    box-shadow: 0 20px 60px rgba(0,0,0,0.5);
    border: 1px solid var(--c-gold);
}

.close-ai {
    position: absolute; top: 15px; right: 20px;
    background: none; border: none; font-size: 2rem; cursor: pointer; color: #999;
}

.ai-title { font-family: var(--f-title); font-size: 2rem; color: var(--c-red); text-align: center; margin-bottom: 10px; }
.ai-subtitle { text-align: center; color: #666; margin-bottom: 30px; font-size: 0.9rem; }

.input-group { display: flex; gap: 10px; margin-bottom: 20px; }
#user-mood {
    flex: 1; padding: 12px; border: 1px solid #ccc;
    font-family: var(--f-body); outline: none; background: #fff;
}
.btn-generate-ai {
    padding: 0 20px; background: var(--c-ink); color: #fff;
    border: none; cursor: pointer; font-family: var(--f-body);
}

.tags-cloud { display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; }
.tags-cloud span {
    padding: 6px 15px; background: #e8e6dc; color: #666; font-size: 0.85rem;
    cursor: pointer; border-radius: 20px; transition: 0.3s;
}
.tags-cloud span:hover { background: var(--c-red); color: #fff; }

/* --- 生成的海报样式 (核心) --- */
.poster-card {
    width: 100%; aspect-ratio: 3/5; position: relative;
    overflow: hidden; background: #333; margin-bottom: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
}
.poster-bg-img {
    width: 100%; height: 100%; object-fit: cover;
    filter: sepia(0.2) contrast(0.9);
}
.poster-overlay {
    position: absolute; inset: 0;
    background: linear-gradient(to bottom, rgba(0,0,0,0.1), rgba(0,0,0,0.8));
}
.poster-content {
    position: absolute; inset: 0; padding: 30px;
    display: flex; flex-direction: column; justify-content: space-between;
    color: #fff;
}
.poster-header { display: flex; justify-content: space-between; font-size: 0.8rem; opacity: 0.8; letter-spacing: 2px; border-bottom: 1px solid rgba(255,255,255,0.3); padding-bottom: 10px; }
.poster-body { text-align: center; flex: 1; display: flex; flex-direction: column; justify-content: center; }
.poster-mood .label, .poster-route .label { font-size: 0.7rem; letter-spacing: 3px; display: block; margin-bottom: 5px; opacity: 0.7; }
#poster-keyword { font-family: var(--f-title); font-size: 3rem; margin-bottom: 30px; color: var(--c-gold); text-shadow: 0 2px 10px rgba(0,0,0,0.5); }
.poster-quote { font-family: var(--f-body); font-size: 1rem; line-height: 1.8; margin-bottom: 40px; font-style: italic; opacity: 0.95; }
#poster-route-name { font-size: 1.2rem; border: 1px solid #fff; display: inline-block; padding: 8px 20px; border-radius: 50px; background: rgba(255,255,255,0.1); backdrop-filter: blur(5px); }

.poster-footer { display: flex; justify-content: space-between; align-items: flex-end; }
.qrcode-mock { font-size: 0.6rem; letter-spacing: 1px; opacity: 0.6; }
.poster-stamp {
    width: 36px; height: 36px; border: 2px solid var(--c-red); color: var(--c-red);
    display: flex; align-items: center; justify-content: center;
    font-family: var(--f-title); font-size: 14px; border-radius: 4px;
    transform: rotate(-10deg); opacity: 0.9; background: rgba(255,255,255,0.8);
}

.hidden { display: none; }
.ai-actions { display: flex; gap: 10px; }
.ai-actions button { flex: 1; padding: 12px; cursor: pointer; border: none; font-family: var(--f-body); }
.btn-download { background: var(--c-red); color: #fff; }
.btn-retry { background: #e8e6dc; color: #333; }